# 그렇다면 어떤 식으로 객체 관계를 디자인해야 할까?  

java 공부를 마치고 Spring을 하기 전에 java 사이드 프로젝트를 하고 싶었다.  
과제 및 질문 게시판 서비스를 하고자 했는데,  
아무리 반복해서 짜봐도 내 코드가 맛있는 스파게티로 밖에 안보였다.  

열심히 인터넷을 헤엄치다가 좋은 영상을 찾았고 정독(?)했다.(감사합니다 배달의민족)  

https://www.youtube.com/watch?v=dJ5C4qRqAgA&list=LL&index=7&t=2s&pp=gAQBiAQB  
![image](https://github.com/tlgur/TIL/assets/88655763/477e08af-a6c1-441e-b493-4040627aa04a)


# 의존, 연관관계
 - 클래스 A안에서 B로 들어갈 수 있으면 연관관계
 - A의 역할 수행중 Return, Parameter 등에 B가 등장한다면 의존 관계
 - 외에도 실체화, 상속 등등

## 알고 있음
 A가 B랑 의존성이 걸리면 A는 B를 알고 있는 것  
 알고있다 == B가 바뀌면 A도 같이 바뀌어야 한다.  

 ===> A는 A 자신이 바뀔때만 바뀌는 게 아니라(말이 좀 이상하긴 한데),  
 B가 바뀔때도 바뀌어야 함!  
 ===> 이게 극한으로 가서 A가 B뿐만 아니라 100개의 객체를 알고 있으면,  
 A의 변경 지점이 무수히 늘어난다는 것  != 객체 지향적

## 순환
A가 B를 알고 있는데, B가 A를 알고 있는 상황  
변경 주기라는 관점을 탑재하고 본다면 둘이 하나의 객체여야 정상인 상황(vs JPA ㅠㅠ)  

두개면 잘보이는데 3개 이상의 Cycle은?  
클래스 다이어그램으로 화살표 그려보기 - 다이어그램의 중요성 1  

## 클래스가 아니라 패키지 단위로도 적용되는 개념
패키지(디렉토리) 구조를 디자인 할때도 다이어그램을 그려봐야 하는 이유  
import문에 들어가는 것 역시, 알고 있다고 표현 가능  

*Spring의 Controller -> Service -> Repository **단방향 관계**

## 피치 못할 상황, Spring식 해결(?)
이러한 내용을 공부하고 사이드 프로젝트를 진행하는데
로그인한 유저별로 게시판이나 user 객체간 동작이 바뀌어야 하는 문제가 도저히 해결이 안됐음  

'누군가는 반드시 모든 객체를 알고 있'어야 하는 문제가 생겼다.  

3주간 머리를 쥐어짜다 포기하고(잠시 내려놓고) Spring 강의를 듣고 Configuration의 개념을 보고 눈이 트였다.

#### 모든걸 알고 있어야 하는 객체를 다른 차원으로 뽑는 것
 - 물론 차원들 끼리는 역시 **단방향**을 유지해야 함 (그래야 다른 차원이니까)
 - domain 패키지, dto 패키지, aop 등등 spring에서는 의존성이 꼬이면 다른 차원으로 뽑는 해결책을 자주 쓴다!
 - GoF의 디자인 패턴에서도 비슷한 적용 방식이 많이 보임
